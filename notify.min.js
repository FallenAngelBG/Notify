(function(a){a.fn.notify=function(k){var b=a.extend({url:"",timer:1000,query:"",icon:"notify.png",data:[]},k);var c=function(l,m){return localStorage.setItem(l,JSON.stringify(m))};var f=function(l){return JSON.parse(localStorage.getItem(l))};var h=f("notifyTime");if(!h){h=[]}var j=function(m){if(!m.name||!m.body){console.error('Given file is not supported! Please set your json as {title: "", body:"", token:"" }');return}console.log(Math.floor(Date.now()/1000));var l=parseInt(m.time);if(Math.floor(Date.now()/1000)<l){return}if(h.indexOf(l)==-1){h.push(l);d(m.name,m.body,!m.icon?b.icon:m.icon);c("notifyTime",h)}};var i=function(n,l,m){return new Notification(n,{body:l,icon:m})};var d=function(n,l,m){if(!("Notification" in window)){alert(l);console.error("Browser do not support notification!")}else{if(Notification.permission==="granted"){i(n,l,m)}else{if(Notification.permission!=="denied"){Notification.requestPermission(function(o){if(o==="granted"){i(n,l,m)}})}}}};var e=function(){a.each(b.data,function(l,m){j(m)});setTimeout(e,b.timer)};var g=function(){var m=a.ajax({url:b.url,data:b.query,dataType:"json"});var l=new Date();m.done(function(n){a.each(n,function(o,p){j(p)})});m.fail(function(n,o){console.error("Cannot find given URL page ")});setTimeout(g,b.timer)};if(b.url){g()}else{if(b.data.length>0){e()}else{console.error("Ajax URL is not set!")}}}}(jQuery));