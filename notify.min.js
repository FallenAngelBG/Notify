(function(a){a.fn.notify=function(j){var b=a.extend({url:"",timer:1000,query:""},j);var c=function(k,l){return localStorage.setItem(k,JSON.stringify(l))};var e=function(k){return JSON.parse(localStorage.getItem(k))};var g=e("notifyTime");if(!g){g=[]}var i=function(l){if(!l.name||!l.body){console.error('Given file is not supported! Please set your json as {title: "", body:"", token:"" }');return}console.log(Math.floor(Date.now()/1000));var k=parseInt(l.time);if(Math.floor(Date.now()/1000)<k){return}if(g.indexOf(k)==-1){g.push(k);d(l.name,l.body,!l.icon?b.icon:l.icon);c("notifyTime",g)}};var h=function(m,k,l){return new Notification(m,{body:k,icon:l})};var d=function(m,k,l){if(!("Notification" in window)){alert(k);console.error("Browser do not support notification!")}else{if(Notification.permission==="granted"){h(m,k,l)}else{if(Notification.permission!=="denied"){Notification.requestPermission(function(n){if(n==="granted"){h(m,k,l)}})}}}};var f=function(){var l=a.ajax({url:b.url,data:b.query,dataType:"json"});var k=new Date();l.done(function(m){a.each(m,function(n,o){i(o)})});l.fail(function(m,n){console.error("Cannot find given URL page ")});setTimeout(f,b.timer)};if(b.url){f()}else{console.error("Ajax URL is not set!")}}}(jQuery));